{"version":3,"sources":["roam_wiki/views.cljs"],"mappings":";AAIA,0BAAA,mFAAA,6DAAA,2CAAA,uDAAA,2CAAA,sDAAA,YAAA,4EAAA,kBAAA,mEAAA,OAAA,oEAAA,rmBAAKA;AAGL,AAAKC,6BAAW,6CAAA,7CAACC;AAEjB,wCAAA,xCAAMC;AAAN,AACE,OACC,AAACC,wCACD,mBAAA,MAAA,WAAA,6EAAA,kDAAA,nKAACC,0LAGD,AAACC;;AAEJ,wCAAA,xCAAMC;AAAN,AAEE,oBAAU,uBAAA,vBAACC;AAAX;;AAAA,AACE,IAAMC,UAAQ,AAACN;IACTO,QAAM,AAACC,4CAAIC,gBAAM,AAACC,0BAAcC;AADtC,AAUO,6CAAA,WAAAK,xDAACH;AAAD,AAAO,4DAAAG,rDAACC,iCAAgB,AAAAD;oDAFxB,6CAAA,WAAAF,xDAACD,jDACD,AAACE,sBAAOjB;AADR,AAAO,2BAAAgB,pBAAcR;GALrB,6CAAA,WAAAM,xDAACC;AAAD,AAAO,0BAAA,MAAA,sHAAA,iBAAA,hKAACX,iCAA6B,AAAA,kFAAAU;GADrCL;;AASL,QAAMW,sBACA;AAAA,AAEO,6CAAA,WAAAC,xDAACN;AAAD,AAAO,yCAAAM,lCAACE;mBADPvB,hBACD,AAAAsB;;AACL,AAASd;;AACT,8BAAA,tBAAMY;;;;AAEpB,uBAAA,vBAAMI;AAAN,AAAA,0FAAA,8EAAA,mFAAA,yKAAA,2CAAA,uDAAA,2CAAA,2DAAA,oCAAA,mFAAA,mDAAA,uBAAA,mFAAA,6DAAA,mFAAA,0HAAA,2CAAA,qNAAA,mFAAA,sEAAA,2CAAA,sGAAA,mFAAA,6JAAA,oBAAA,mFAAA,sEAAA,2CAAA,qFAAA,mFAAA,2JAAA,sBAAA,mFAAA,sEAAA,2CAAA,2GAAA,mFAAA,iKAAA,9wDAKqD,AAACC,4BAAgBC,8CAA2Bb,8DAC9Fd,iRACsB,4BAAA,5BAAC0B,8iBAGDE,qiBAGIrB","names":["roam-wiki.views/divider","roam-wiki.views/todo-nodes","cljs.core.atom","roam-wiki.views/add-task-list-wrapper","roam-wiki.roam/roam-main","goog.dom/createDom","roam-wiki.roam/roam-body-main","roam-wiki.views/mount-todo-list!","js/document.querySelector","wrapper","todos","cljs.core.map","cljs.core/first","roam-wiki.roam/user-todos","roam-wiki.roam/current-user-page-name","p1__26571#","cljs.core.mapv","p1__26572#","cljs.core/reset!","p1__26573#","roam-wiki.roam/mount-block!","js/window.onhashchange","p1__26574#","cljs.core/deref","roam-wiki.roam/unmount-node!","roam-wiki.views/main","roam-wiki.roam/get-page-url","roam-wiki.roam/current-user-page-uid","roam-wiki.roam/base-url"],"sourcesContent":["(ns roam-wiki.views\n  [:require [roam-wiki.roam :as rm]\n   [goog.dom :as gdom]])\n\n(def divider\n  [:div.mb-2 {:style {:flex \"0 0 0.5px\" :background-color \"rgb(57, 75, 89)\" :margin-left \"20px\" :margin-right \"20px\"}}])\n\n(def todo-nodes (atom []))\n\n(defn add-task-list-wrapper []\n  (.insertBefore\n   (rm/roam-main)\n   (gdom/createDom \"div\" #js{:class \"roam-wiki-task-list-wrapper rm-article-wrapper rm-spacing--small\"\n                             :style \"flex: 0 0 auto; margin-top: 50px;\"\n                             :innerHTML \"<h1>My tasks</h1>\"})\n   (rm/roam-body-main)))\n\n(defn mount-todo-list! []\n  ;;(rm/clear-body-main)\n  (when-not (js/document.querySelector \".roam-wiki-task-list-wrapper\")\n    (let [wrapper (add-task-list-wrapper)\n          todos (map first (rm/user-todos rm/current-user-page-name))]\n      (->> todos\n           (mapv #(gdom/createDom \"div\" #js{:id (:uid %)\n                                            :class \"py-2\"\n                                            :style \"border-bottom: 1px solid rgba(55, 53, 47, 0.09);\n                                                    \"}))\n\n           (mapv #(.appendChild wrapper %))\n           (reset! todo-nodes)\n           (mapv #(rm/mount-block! (.-id %) %)))\n      (set! js/window.onhashchange\n            (fn []\n              (->> @todo-nodes\n                   (mapv #(rm/unmount-node! %)))\n              (.remove wrapper)\n              (set! js/window.onhashchange nil))))))\n\n(defn main []\n  [:div.flex.flex-col\n   [:div.flex.justify-end.items-center.text-sm.roam-wiki-editing-as {:style {:padding \"0px 20px 5px 20px\"}}\n    [:div  \"Editing as: \"]\n    [:div.flex\n     [:a.roam-wiki-user-name.p-1.mx-1.rounded {:href (rm/get-page-url rm/current-user-page-uid)} rm/current-user-page-name]]]\n   divider\n   [:a.log-button {:href (rm/get-page-url \"IUTjyZyiV\")}\n    [:span.bp3-icon.bp3-icon-lightbulb.icon.bp3-icon-small]\n    \"Dashboard\"]\n   [:a.log-button {:href rm/base-url}\n    [:span.bp3-icon.bp3-icon-calendar.icon.bp3-icon-small]\n    \"Daily notes\"]\n   [:a.log-button {:on-click mount-todo-list!}\n    [:span.bp3-icon.bp3-icon-tick-circle.icon.bp3-icon-small]\n    \"My tasks\"]])\n"]}